# OTPVault

OTPVault は、セルフホスト型のシンプルかつセキュアな、Web ブラウザ上で動作する TOTP（Time-based One-Time Password）マネージャーです。  
Google Authenticator などのアプリと同様に、2要素認証（2FA）コードを生成・管理できます。

## 特徴

  - **Web インターフェース**  
    ブラウザからアクセス可能なシングルページアプリケーション。
  - **セキュアな保存**  
    すべてのシークレットキーは、マスターパスワードを用いて強力に暗号化（Fernet / AES）され、`encrypted.bin` ファイルに保存されます。
  - **リアルタイム更新**  
    コードの有効期限を示すプログレスバーと自動更新機能。
  - **クリップボードコピー**  
    ワンクリックで OTP コードをコピー可能。
  - **簡単な追加**  
    UI 上から新しいアカウント（発行者、アカウント名、Base32 シークレット）を簡単に追加可能。

## 使い方

### 1\. アプリケーションの起動

ターミナルで `main.py` を実行します。

```bash
python main.py
```

### 2\. 初期設定（初回のみ）

初回起動時、データ保存用ファイル `encrypted.bin` が存在しない場合、**マスターパスワード**の設定を求められます。ターミナルのプロンプトに従ってパスワードを設定してください。

```text
=== 初期設定 ===
encrypted.bin が見つかりません。
新しいストレージを作成します。
マスターパスワードを設定してください: (入力)
確認のためもう一度入力してください: (入力)
設定が完了しました。サーバーを起動します。
```

### 3\. ブラウザでのアクセス

ブラウザを開き、以下の URL にアクセスします。

`http://localhost:8000`

### 4\. ログインと利用

1.  **ログイン画面**: 起動時に設定したマスターパスワードを入力して「Unlock」をクリックします。
2.  **アカウントの追加**: 右上の「Add」ボタンをクリックし、発行者名（例: Google）、アカウント名、シークレットキー（Base32形式）を入力して保存します。
3.  **コードの確認**: 保存されたアカウントの 6桁のコードが表示されます。コードをクリックするとクリップボードにコピーされます。

https://github.com/user-attachments/assets/a63abfc2-1586-4182-a16e-610e02b8efb9

## セキュリティに関する注意

  * **encrypted.bin**: このファイルには全てのアカウント情報が暗号化されて保存されています。このファイルを削除するとデータは失われます。
  * **マスターパスワード**: データの復号化にはマスターパスワードが必須です。これを忘れるとデータにアクセスできなくなります。
  * **通信経路**: ローカルネットワーク外に公開する場合は、HTTPS (SSL/TLS) 化することを強く推奨します（パスワードがヘッダー経由で送信されるため）。
